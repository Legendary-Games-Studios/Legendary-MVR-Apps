<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Collect Cubes</title>
<style>
html, body {
  margin: 0;
  padding: 0;
  overflow: hidden;
  background: black;
  color: white;
  font-family: sans-serif;
}

#score {
  position: fixed;
  top: 10px;
  left: 10px;
  font-size: 20px;
}

#reticle {
  position: fixed;
  top: 50%;
  left: 50%;
  width: 10px;
  height: 10px;
  margin-left: -5px;
  margin-top: -5px;
  border: 2px solid white;
  border-radius: 50%;
}

.cube {
  position: absolute;
  width: 40px;
  height: 40px;
  background: cyan;
}
</style>
</head>

<body>

<div id="score">Score: 0</div>
<div id="reticle"></div>

<script>
let score = 0;
let cubes = [];
let yaw = 0;
let pitch = 0;

// Convert world coords to screen
function project(x, y, z) {
  let scale = 300 / (z + 5);
  return {
    x: window.innerWidth / 2 + x * scale,
    y: window.innerHeight / 2 + y * scale,
    size: scale * 40
  };
}

// Spawn cube
function spawnCube() {
  let cube = document.createElement("div");
  cube.className = "cube";

  cube.world = {
    x: (Math.random() - 0.5) * 4,
    y: (Math.random() - 0.5) * 4,
    z: Math.random() * 4 + 2
  };

  document.body.appendChild(cube);
  cubes.push(cube);
}

// Look-to-collect
function update() {
  for (let i = cubes.length - 1; i >= 0; i--) {
    let c = cubes[i];

    let x = c.world.x - yaw * 2;
    let y = c.world.y + pitch * 2;
    let z = c.world.z;

    let p = project(x, y, z);

    c.style.left = (p.x - p.size / 2) + "px";
    c.style.top = (p.y - p.size / 2) + "px";
    c.style.width = p.size + "px";
    c.style.height = p.size + "px";

    // Check if centered (looked at)
    if (Math.abs(x) < 0.1 && Math.abs(y) < 0.1) {
      score++;
      document.getElementById("score").innerText = "Score: " + score;
      c.remove();
      cubes.splice(i, 1);
    }
  }

  requestAnimationFrame(update);
}

// Gyro input from Legendary MVR
function onGyro(x, y, z) {
  yaw += y * 0.05;
  pitch += x * 0.05;

  // Clamp
  pitch = Math.max(-1, Math.min(1, pitch));
}

// Spawn a cube every second
setInterval(spawnCube, 1000);

// Start game
spawnCube();
update();
</script>

</body>
</html>