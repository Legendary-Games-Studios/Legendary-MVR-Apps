<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>CollectCubes</title>
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
  <style>
    body { margin: 0; overflow: hidden; }
    #score { position: absolute; top: 10px; left: 10px; font-size: 24px; color: white; z-index: 1; }
  </style>
</head>
<body>
  <div id="score">Score: 0</div>
  <a-scene embedded vr-mode-ui="enabled: true">
    <a-camera id="camera" position="0 1.6 0" look-controls>
      <a-cursor
        fuse="true"
        fuse-timeout="800"
        geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03"
        material="color: cyan; shader: flat"
        position="0 0 -1">
      </a-cursor>
    </a-camera>

    <!-- Ground -->
    <a-plane rotation="-90 0 0" width="20" height="20" color="#7BC8A4"></a-plane>

    <script>
      const scene = document.querySelector('a-scene');
      const scoreDiv = document.getElementById('score');
      let score = 0;

      function spawnCube() {
        const cube = document.createElement('a-box');
        cube.setAttribute('color', '#' + Math.floor(Math.random() * 16777215).toString(16));
        cube.setAttribute('depth', 0.5);
        cube.setAttribute('height', 0.5);
        cube.setAttribute('width', 0.5);

        // Random position in 360Â° around player
        const angle = Math.random() * 2 * Math.PI;
        const distance = 2 + Math.random() * 3; // 2-5 units away
        const x = Math.cos(angle) * distance;
        const z = Math.sin(angle) * distance;
        const y = 1 + Math.random() * 2; // height 1-3

        cube.setAttribute('position', `${x} ${y} ${z}`);
        cube.setAttribute('class', 'collectible');

        // Gaze-based collection
        cube.addEventListener('click', () => {
          score++;
          scoreDiv.innerText = 'Score: ' + score;
          scene.removeChild(cube);
        });

        scene.appendChild(cube);
      }

      // Spawn a new cube every second
      setInterval(spawnCube, 1000);
    </script>
  </a-scene>
</body>
</html>
